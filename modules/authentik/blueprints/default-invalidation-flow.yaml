version: 1
metadata:
  name: Default Invalidation (Logout) Flow
  description: Ensure the default invalidation flow with User Logout stage so sessions are cleared properly

entries:
  - id: default-invalidation-flow
    model: authentik_flows.flow
    identifiers:
      slug: default-provider-invalidation-flow
    attrs:
      name: Flow Logged out of application
      slug: default-provider-invalidation-flow
      designation: invalidation
      title: "Signed out"

  - id: stage-user-logout
    model: authentik_stages_user_logout.userlogoutstage
    identifiers:
      name: Default User Logout
    attrs:
      name: Default User Logout

  - id: binding-logout
    model: authentik_flows.flowstagebinding
    identifiers:
      target: !KeyOf default-invalidation-flow
      stage: !KeyOf stage-user-logout
    attrs:
      target: !KeyOf default-invalidation-flow
      stage: !KeyOf stage-user-logout
      order: 0


